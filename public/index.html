<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title></title>
    <style>
      [v-cloak] {
        display: none;
      }
    </style>
  </head>

  <body data-content-max>
    <noscript>
      <strong
        >We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work
        properly without JavaScript enabled. Please enable it to
        continue.</strong
      >
    </noscript>
    <div id="app" v-cloak></div>
    <script>
      (function() {
        // 根据dpr动态设置meta viewport
        const docEl = document.documentElement
        const metaEl = document.querySelector('meta[name="viewport"]');
        const dpr = window.devicePixelRatio || 1;
        const scale = 1 / dpr;
        metaEl.setAttribute('content', 'width=' + dpr * docEl.clientWidth + ',initial-scale=' + scale + ',maximum-scale=' + scale + ', minimum-scale=' + scale + ',user-scalable=no');
      })();
    </script>
    <script>
      // 防止微信字体设置变大 字体跟着变大导致布局混乱
      // 安卓：
      (function() {
        if (
          typeof WeixinJSBridge == "object" &&
          typeof WeixinJSBridge.invoke == "function"
        ) {
          handleFontSize();
        } else {
          if (document.addEventListener) {
            document.addEventListener(
              "WeixinJSBridgeReady",
              handleFontSize,
              false
            );
          } else if (document.attachEvent) {
            //IE浏览器，非W3C规范
            document.attachEvent("onWeixinJSBridgeReady", handleFontSize);
          }
        }
        function handleFontSize() {
          // 设置网页字体为默认大小
          WeixinJSBridge.invoke("setFontSizeCallback", { fontSize: 0 });
          // 重写设置网页字体大小的事件
          WeixinJSBridge.on("menu:setfont", function() {
            WeixinJSBridge.invoke("setFontSizeCallback", { fontSize: 0 });
          });
        }
      })();
    </script>
  </body>
</html>
